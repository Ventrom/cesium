define(["./when-54c2dc71","./Cartesian2-15709417","./arrayRemoveDuplicates-b5ccac6b","./BoundingRectangle-9d91ffef","./Transforms-c00dcfdd","./ComponentDatatype-a26dd044","./PolylineVolumeGeometryLibrary-6c9cb4ba","./Check-6c0211bc","./GeometryAttribute-c2f3a6a0","./GeometryAttributes-4fcfcf40","./IndexDatatype-eaebd63b","./Math-fbfbe3b1","./PolygonPipeline-5326ae1a","./RuntimeError-2109023a","./WebGLConstants-76bb35d1","./EllipsoidTangentPlane-989039a6","./IntersectionTests-9d9af9db","./Plane-ff99a7c3","./PolylinePipeline-53cbf02f","./EllipsoidGeodesic-e0adc5e7","./EllipsoidRhumbLine-281c49be"],function(d,c,a,o,y,f,l,u,h,g,v,t,s,e,i,r,n,p,m,E,b){"use strict";function P(e){var i=(e=d.defaultValue(e,d.defaultValue.EMPTY_OBJECT)).polylinePositions,r=e.shapePositions;if(!d.defined(i))throw new u.DeveloperError("options.polylinePositions is required.");if(!d.defined(r))throw new u.DeveloperError("options.shapePositions is required.");this._positions=i,this._shape=r,this._ellipsoid=c.Ellipsoid.clone(d.defaultValue(e.ellipsoid,c.Ellipsoid.WGS84)),this._cornerType=d.defaultValue(e.cornerType,l.CornerType.ROUNDED),this._granularity=d.defaultValue(e.granularity,t.CesiumMath.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeOutlineGeometry";var n=1+i.length*c.Cartesian3.packedLength;n+=1+r.length*c.Cartesian2.packedLength,this.packedLength=n+c.Ellipsoid.packedLength+2}P.pack=function(e,i,r){if(!d.defined(e))throw new u.DeveloperError("value is required");if(!d.defined(i))throw new u.DeveloperError("array is required");var n;r=d.defaultValue(r,0);var t=e._positions,a=t.length;for(i[r++]=a,n=0;n<a;++n,r+=c.Cartesian3.packedLength)c.Cartesian3.pack(t[n],i,r);var o=e._shape;for(a=o.length,i[r++]=a,n=0;n<a;++n,r+=c.Cartesian2.packedLength)c.Cartesian2.pack(o[n],i,r);return c.Ellipsoid.pack(e._ellipsoid,i,r),r+=c.Ellipsoid.packedLength,i[r++]=e._cornerType,i[r]=e._granularity,i};var _=c.Ellipsoid.clone(c.Ellipsoid.UNIT_SPHERE),k={polylinePositions:void 0,shapePositions:void 0,ellipsoid:_,height:void 0,cornerType:void 0,granularity:void 0};P.unpack=function(e,i,r){if(!d.defined(e))throw new u.DeveloperError("array is required");var n;i=d.defaultValue(i,0);var t=e[i++],a=new Array(t);for(n=0;n<t;++n,i+=c.Cartesian3.packedLength)a[n]=c.Cartesian3.unpack(e,i);t=e[i++];var o=new Array(t);for(n=0;n<t;++n,i+=c.Cartesian2.packedLength)o[n]=c.Cartesian2.unpack(e,i);var l=c.Ellipsoid.unpack(e,i,_);i+=c.Ellipsoid.packedLength;var s=e[i++],p=e[i];return d.defined(r)?(r._positions=a,r._shape=o,r._ellipsoid=c.Ellipsoid.clone(l,r._ellipsoid),r._cornerType=s,r._granularity=p,r):(k.polylinePositions=a,k.shapePositions=o,k.cornerType=s,k.granularity=p,new P(k))};var C=new o.BoundingRectangle;return P.createGeometry=function(e){var i=e._positions,r=a.arrayRemoveDuplicates(i,c.Cartesian3.equalsEpsilon),n=e._shape;if(n=l.PolylineVolumeGeometryLibrary.removeDuplicatesFromShape(n),!(r.length<2||n.length<3)){s.PolygonPipeline.computeWindingOrder2D(n)===s.WindingOrder.CLOCKWISE&&n.reverse();var t=o.BoundingRectangle.fromPoints(n,C);return function(e,i){var r=new g.GeometryAttributes;r.position=new h.GeometryAttribute({componentDatatype:f.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:e});var n,t,a=i.length,o=r.position.values.length/3,l=e.length/3/a,s=v.IndexDatatype.createTypedArray(o,2*a*(l+1)),p=0,d=(n=0)*a;for(t=0;t<a-1;t++)s[p++]=t+d,s[p++]=t+d+1;for(s[p++]=a-1+d,s[p++]=d,d=(n=l-1)*a,t=0;t<a-1;t++)s[p++]=t+d,s[p++]=t+d+1;for(s[p++]=a-1+d,s[p++]=d,n=0;n<l-1;n++){var c=a*n,u=c+a;for(t=0;t<a;t++)s[p++]=t+c,s[p++]=t+u}return new h.Geometry({attributes:r,indices:v.IndexDatatype.createTypedArray(o,s),boundingSphere:y.BoundingSphere.fromVertices(e),primitiveType:h.PrimitiveType.LINES})}(l.PolylineVolumeGeometryLibrary.computePositions(r,n,t,e,!1),n)}},function(e,i){return d.defined(i)&&(e=P.unpack(e,i)),e._ellipsoid=c.Ellipsoid.clone(e._ellipsoid),P.createGeometry(e)}});
//# sourceMappingURL=createPolylineVolumeOutlineGeometry.js.map
