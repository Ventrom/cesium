define(["exports","./Transforms-c00dcfdd","./Cartesian2-15709417","./Check-6c0211bc","./when-54c2dc71","./EllipsoidTangentPlane-989039a6","./Math-fbfbe3b1","./Plane-ff99a7c3"],function(a,N,W,X,j,Z,G,Y){"use strict";function A(a,e){this.center=W.Cartesian3.clone(j.defaultValue(a,W.Cartesian3.ZERO)),this.halfAxes=N.Matrix3.clone(j.defaultValue(e,N.Matrix3.ZERO))}A.packedLength=W.Cartesian3.packedLength+N.Matrix3.packedLength,A.pack=function(a,e,t){return X.Check.typeOf.object("value",a),X.Check.defined("array",e),t=j.defaultValue(t,0),W.Cartesian3.pack(a.center,e,t),N.Matrix3.pack(a.halfAxes,e,t+W.Cartesian3.packedLength),e},A.unpack=function(a,e,t){return X.Check.defined("array",a),e=j.defaultValue(e,0),j.defined(t)||(t=new A),W.Cartesian3.unpack(a,e,t.center),N.Matrix3.unpack(a,e+W.Cartesian3.packedLength,t.halfAxes),t};var T=new W.Cartesian3,R=new W.Cartesian3,I=new W.Cartesian3,D=new W.Cartesian3,L=new W.Cartesian3,z=new W.Cartesian3,S=new N.Matrix3,q={unitary:new N.Matrix3,diagonal:new N.Matrix3};A.fromPoints=function(a,e){if(j.defined(e)||(e=new A),!j.defined(a)||0===a.length)return e.halfAxes=N.Matrix3.ZERO,e.center=W.Cartesian3.ZERO,e;var t,r=a.length,n=W.Cartesian3.clone(a[0],T);for(t=1;t<r;t++)W.Cartesian3.add(n,a[t],n);var i=1/r;W.Cartesian3.multiplyByScalar(n,i,n);var s,o=0,d=0,C=0,c=0,u=0,l=0;for(t=0;t<r;t++)o+=(s=W.Cartesian3.subtract(a[t],n,R)).x*s.x,d+=s.x*s.y,C+=s.x*s.z,c+=s.y*s.y,u+=s.y*s.z,l+=s.z*s.z;o*=i,d*=i,C*=i,c*=i,u*=i,l*=i;var h=S;h[0]=o,h[1]=d,h[2]=C,h[3]=d,h[4]=c,h[5]=u,h[6]=C,h[7]=u,h[8]=l;var f=N.Matrix3.computeEigenDecomposition(h,q),m=N.Matrix3.clone(f.unitary,e.halfAxes),x=N.Matrix3.getColumn(m,0,D),p=N.Matrix3.getColumn(m,1,L),M=N.Matrix3.getColumn(m,2,z),w=-Number.MAX_VALUE,g=-Number.MAX_VALUE,b=-Number.MAX_VALUE,v=Number.MAX_VALUE,y=Number.MAX_VALUE,O=Number.MAX_VALUE;for(t=0;t<r;t++)s=a[t],w=Math.max(W.Cartesian3.dot(x,s),w),g=Math.max(W.Cartesian3.dot(p,s),g),b=Math.max(W.Cartesian3.dot(M,s),b),v=Math.min(W.Cartesian3.dot(x,s),v),y=Math.min(W.Cartesian3.dot(p,s),y),O=Math.min(W.Cartesian3.dot(M,s),O);x=W.Cartesian3.multiplyByScalar(x,.5*(v+w),x),p=W.Cartesian3.multiplyByScalar(p,.5*(y+g),p),M=W.Cartesian3.multiplyByScalar(M,.5*(O+b),M);var E=W.Cartesian3.add(x,p,e.center);W.Cartesian3.add(E,M,E);var P=I;return P.x=w-v,P.y=g-y,P.z=b-O,W.Cartesian3.multiplyByScalar(P,.5,P),N.Matrix3.multiplyByScale(e.halfAxes,P,e.halfAxes),e};var m=new W.Cartesian3,x=new W.Cartesian3;function F(a,e,t,r,n,i,s,o,d,C,c){if(!(j.defined(n)&&j.defined(i)&&j.defined(s)&&j.defined(o)&&j.defined(d)&&j.defined(C)))throw new X.DeveloperError("all extents (minimum/maximum X/Y/Z) are required.");j.defined(c)||(c=new A);var u=c.halfAxes;N.Matrix3.setColumn(u,0,e,u),N.Matrix3.setColumn(u,1,t,u),N.Matrix3.setColumn(u,2,r,u);var l=m;l.x=(n+i)/2,l.y=(s+o)/2,l.z=(d+C)/2;var h=x;h.x=(i-n)/2,h.y=(o-s)/2,h.z=(C-d)/2;var f=c.center;return l=N.Matrix3.multiplyByVector(u,l,l),W.Cartesian3.add(a,l,f),N.Matrix3.multiplyByScale(u,h,u),c}var H=new W.Cartographic,J=new W.Cartesian3,K=new W.Cartographic,Q=new W.Cartographic,$=new W.Cartographic,aa=new W.Cartographic,ea=new W.Cartographic,ta=new W.Cartesian3,ra=new W.Cartesian3,na=new W.Cartesian3,ia=new W.Cartesian3,sa=new W.Cartesian3,oa=new W.Cartesian2,da=new W.Cartesian2,Ca=new W.Cartesian2,ca=new W.Cartesian2,ua=new W.Cartesian2,la=new W.Cartesian3,ha=new W.Cartesian3,fa=new W.Cartesian3,ma=new W.Cartesian3,xa=new W.Cartesian2,pa=new W.Cartesian3,Ma=new W.Cartesian3,wa=new W.Cartesian3,ga=new Y.Plane(W.Cartesian3.UNIT_X,0);A.fromRectangle=function(a,e,t,r,n){if(!j.defined(a))throw new X.DeveloperError("rectangle is required");if(a.width<0||a.width>G.CesiumMath.TWO_PI)throw new X.DeveloperError("Rectangle width must be between 0 and 2*pi");if(a.height<0||a.height>G.CesiumMath.PI)throw new X.DeveloperError("Rectangle height must be between 0 and pi");if(j.defined(r)&&!G.CesiumMath.equalsEpsilon(r.radii.x,r.radii.y,G.CesiumMath.EPSILON15))throw new X.DeveloperError("Ellipsoid must be an ellipsoid of revolution (radii.x == radii.y)");var i,s,o,d,C,c,u;if(e=j.defaultValue(e,0),t=j.defaultValue(t,0),r=j.defaultValue(r,W.Ellipsoid.WGS84),a.width<=G.CesiumMath.PI){var l=W.Rectangle.center(a,H),h=r.cartographicToCartesian(l,J),f=new Z.EllipsoidTangentPlane(h,r);u=f.plane;var m=l.longitude,x=a.south<0&&0<a.north?0:l.latitude,p=W.Cartographic.fromRadians(m,a.north,t,K),M=W.Cartographic.fromRadians(a.west,a.north,t,Q),w=W.Cartographic.fromRadians(a.west,x,t,$),g=W.Cartographic.fromRadians(a.west,a.south,t,aa),b=W.Cartographic.fromRadians(m,a.south,t,ea),v=r.cartographicToCartesian(p,ta),y=r.cartographicToCartesian(M,ra),O=r.cartographicToCartesian(w,na),E=r.cartographicToCartesian(g,ia),P=r.cartographicToCartesian(b,sa),N=f.projectPointToNearestOnPlane(v,oa),A=f.projectPointToNearestOnPlane(y,da),T=f.projectPointToNearestOnPlane(O,Ca),R=f.projectPointToNearestOnPlane(E,ca),I=f.projectPointToNearestOnPlane(P,ua);return s=-(i=Math.min(A.x,T.x,R.x)),d=Math.max(A.y,N.y),o=Math.min(R.y,I.y),M.height=g.height=e,y=r.cartographicToCartesian(M,ra),E=r.cartographicToCartesian(g,ia),C=Math.min(Y.Plane.getPointDistance(u,y),Y.Plane.getPointDistance(u,E)),c=t,F(f.origin,f.xAxis,f.yAxis,f.zAxis,i,s,o,d,C,c,n)}var D=0<a.south,L=a.north<0,z=D?a.south:L?a.north:0,S=W.Rectangle.center(a,H).longitude,q=W.Cartesian3.fromRadians(S,z,t,r,la);q.z=0;var U=Math.abs(q.x)<G.CesiumMath.EPSILON10&&Math.abs(q.y)<G.CesiumMath.EPSILON10?W.Cartesian3.UNIT_X:W.Cartesian3.normalize(q,ha),V=W.Cartesian3.UNIT_Z,k=W.Cartesian3.cross(U,V,fa);u=Y.Plane.fromPointNormal(q,U,ga);var B=W.Cartesian3.fromRadians(S+G.CesiumMath.PI_OVER_TWO,z,t,r,ma);i=-(s=W.Cartesian3.dot(Y.Plane.projectPointOntoPlane(u,B,xa),k)),d=W.Cartesian3.fromRadians(0,a.north,L?e:t,r,pa).z,o=W.Cartesian3.fromRadians(0,a.south,D?e:t,r,Ma).z;var _=W.Cartesian3.fromRadians(a.east,z,t,r,wa);return F(q,k,V,U,i,s,o,d,C=Y.Plane.getPointDistance(u,_),c=0,n)},A.clone=function(a,e){if(j.defined(a))return j.defined(e)?(W.Cartesian3.clone(a.center,e.center),N.Matrix3.clone(a.halfAxes,e.halfAxes),e):new A(a.center,a.halfAxes)},A.intersectPlane=function(a,e){if(!j.defined(a))throw new X.DeveloperError("box is required.");if(!j.defined(e))throw new X.DeveloperError("plane is required.");var t=a.center,r=e.normal,n=a.halfAxes,i=r.x,s=r.y,o=r.z,d=Math.abs(i*n[N.Matrix3.COLUMN0ROW0]+s*n[N.Matrix3.COLUMN0ROW1]+o*n[N.Matrix3.COLUMN0ROW2])+Math.abs(i*n[N.Matrix3.COLUMN1ROW0]+s*n[N.Matrix3.COLUMN1ROW1]+o*n[N.Matrix3.COLUMN1ROW2])+Math.abs(i*n[N.Matrix3.COLUMN2ROW0]+s*n[N.Matrix3.COLUMN2ROW1]+o*n[N.Matrix3.COLUMN2ROW2]),C=W.Cartesian3.dot(r,t)+e.distance;return C<=-d?N.Intersect.OUTSIDE:d<=C?N.Intersect.INSIDE:N.Intersect.INTERSECTING};var f=new W.Cartesian3,p=new W.Cartesian3,M=new W.Cartesian3,h=new W.Cartesian3;A.distanceSquaredTo=function(a,e){if(!j.defined(a))throw new X.DeveloperError("box is required.");if(!j.defined(e))throw new X.DeveloperError("cartesian is required.");var t=W.Cartesian3.subtract(e,a.center,m),r=a.halfAxes,n=N.Matrix3.getColumn(r,0,f),i=N.Matrix3.getColumn(r,1,p),s=N.Matrix3.getColumn(r,2,M),o=W.Cartesian3.magnitude(n),d=W.Cartesian3.magnitude(i),C=W.Cartesian3.magnitude(s);W.Cartesian3.normalize(n,n),W.Cartesian3.normalize(i,i),W.Cartesian3.normalize(s,s);var c=h;c.x=W.Cartesian3.dot(t,n),c.y=W.Cartesian3.dot(t,i),c.z=W.Cartesian3.dot(t,s);var u,l=0;return c.x<-o?l+=(u=c.x+o)*u:c.x>o&&(l+=(u=c.x-o)*u),c.y<-d?l+=(u=c.y+d)*u:c.y>d&&(l+=(u=c.y-d)*u),c.z<-C?l+=(u=c.z+C)*u:c.z>C&&(l+=(u=c.z-C)*u),l};var w=new W.Cartesian3,g=new W.Cartesian3;A.computePlaneDistances=function(a,e,t,r){if(!j.defined(a))throw new X.DeveloperError("box is required.");if(!j.defined(e))throw new X.DeveloperError("position is required.");if(!j.defined(t))throw new X.DeveloperError("direction is required.");j.defined(r)||(r=new N.Interval);var n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=a.center,o=a.halfAxes,d=N.Matrix3.getColumn(o,0,f),C=N.Matrix3.getColumn(o,1,p),c=N.Matrix3.getColumn(o,2,M),u=W.Cartesian3.add(d,C,w);W.Cartesian3.add(u,c,u),W.Cartesian3.add(u,s,u);var l=W.Cartesian3.subtract(u,e,g),h=W.Cartesian3.dot(t,l);return n=Math.min(h,n),i=Math.max(h,i),W.Cartesian3.add(s,d,u),W.Cartesian3.add(u,C,u),W.Cartesian3.subtract(u,c,u),W.Cartesian3.subtract(u,e,l),h=W.Cartesian3.dot(t,l),n=Math.min(h,n),i=Math.max(h,i),W.Cartesian3.add(s,d,u),W.Cartesian3.subtract(u,C,u),W.Cartesian3.add(u,c,u),W.Cartesian3.subtract(u,e,l),h=W.Cartesian3.dot(t,l),n=Math.min(h,n),i=Math.max(h,i),W.Cartesian3.add(s,d,u),W.Cartesian3.subtract(u,C,u),W.Cartesian3.subtract(u,c,u),W.Cartesian3.subtract(u,e,l),h=W.Cartesian3.dot(t,l),n=Math.min(h,n),i=Math.max(h,i),W.Cartesian3.subtract(s,d,u),W.Cartesian3.add(u,C,u),W.Cartesian3.add(u,c,u),W.Cartesian3.subtract(u,e,l),h=W.Cartesian3.dot(t,l),n=Math.min(h,n),i=Math.max(h,i),W.Cartesian3.subtract(s,d,u),W.Cartesian3.add(u,C,u),W.Cartesian3.subtract(u,c,u),W.Cartesian3.subtract(u,e,l),h=W.Cartesian3.dot(t,l),n=Math.min(h,n),i=Math.max(h,i),W.Cartesian3.subtract(s,d,u),W.Cartesian3.subtract(u,C,u),W.Cartesian3.add(u,c,u),W.Cartesian3.subtract(u,e,l),h=W.Cartesian3.dot(t,l),n=Math.min(h,n),i=Math.max(h,i),W.Cartesian3.subtract(s,d,u),W.Cartesian3.subtract(u,C,u),W.Cartesian3.subtract(u,c,u),W.Cartesian3.subtract(u,e,l),h=W.Cartesian3.dot(t,l),n=Math.min(h,n),i=Math.max(h,i),r.start=n,r.stop=i,r};var r=new N.BoundingSphere;A.isOccluded=function(a,e){if(!j.defined(a))throw new X.DeveloperError("box is required.");if(!j.defined(e))throw new X.DeveloperError("occluder is required.");var t=N.BoundingSphere.fromOrientedBoundingBox(a,r);return!e.isBoundingSphereVisible(t)},A.prototype.intersectPlane=function(a){return A.intersectPlane(this,a)},A.prototype.distanceSquaredTo=function(a){return A.distanceSquaredTo(this,a)},A.prototype.computePlaneDistances=function(a,e,t){return A.computePlaneDistances(this,a,e,t)},A.prototype.isOccluded=function(a){return A.isOccluded(this,a)},A.equals=function(a,e){return a===e||j.defined(a)&&j.defined(e)&&W.Cartesian3.equals(a.center,e.center)&&N.Matrix3.equals(a.halfAxes,e.halfAxes)},A.prototype.clone=function(a){return A.clone(this,a)},A.prototype.equals=function(a){return A.equals(this,a)},a.OrientedBoundingBox=A});
//# sourceMappingURL=OrientedBoundingBox-c277851a.js.map
